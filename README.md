# spring-practice
spring框架学习实践

2018年5月

学习的第一个`Spring`家族框架

`Spring`作为一个轻量级的开源框架，为解决企业应用程序开发复杂性而诞生，拥有`IOC`与`AOP`两大法宝，使开发者可以更加轻松的进行项目的研发，是`Java`开发相关框架中的龙头老大。它也像是一个万能胶，可以整合多种第三方框架，共同完成更加全面高效的开发任务。

`IOC`(`Inversion Of Control`)控制反转，`Spring`的两大核心之一。  
>>所谓控制反转，可以理解正如其字面表述，开发者将对象的“控制权”交给了`Spring`的`IOC容器`(本质上是一个`HashMap`,同时`Spring`中`Bean`默认的单例模式就是通过`HashMap`实现的)，从而实现了“反转”。开发者不再需要自己去控制实现对象之间的依赖，而是将这些想要实现的依赖“告诉”`Spring`，它就会自动的帮助我们实现。 
  
>>`Spring`会根据我们在`applicationContext.xml配置文件`中配置好的扫描路径去扫描相应的包(`Spring`同样也支持`注解驱动`，可以使整个项目更简洁，但是个人还是建议注解与配置文件共存，因为有的注解里面的value值过于冗长)，然后找到带有`@Repository`、`@Service`、`@Controller`注解的类并加以储存，再通过`反射`得到这些类的实例对象。`Spring`可以使对象之间的联系`不再依赖new关键字`，取而代之的是使用`@Autowired`注解，从而使对象可以用过`DI`(`依赖注入`,与`IOC`的概念相似，就是指对象是`被动接受依赖`而不是自己主动去找，是`IOC`概念的具体实现。底层原理是判断这个变量上面若是有`@Autowired`注解标注，就通过反射使用`Setter(设值注入)`或者`Constructor(构造注入)`来进行注入)的方式实现相互的关联，大大降低了代码的耦合性，使其扩展性与修改性大大提高。同时，对象的创建与销毁，其整个生命周期，也会都由`IOC`容器进行管理。(更多底层实现细节会在后面的手写山寨Spring框架专题中展现)

`AOP`(`Aspect-Oriented Programming`)面向切面编程，`Spring`的第二个核心。  
>> 正如其名，面向切面编程，开发者可以“使用”切面来进行编程。`AOP`当前已经成为一种比较成熟的编程思想，可以用来很好的解决应用系统中分布于各个模块的交叉关注点问题，使开发者的关注从垂直延伸到水平。`AOP`可以用来灵活处理一些具有横切性质的系统级服务功能，如事务处理、安全检查、日志记录等。非核心服务内容、频繁出现是这类功能的共同点，若开发者在所有需要这些功能的模块中全部加入这些功能，会造成代码上的大量冗余。而AOP可以让开发者只在一处定义一次这些功能，再将这些代码作为“`切面`(横切关注点被模块化为特殊的类)”插入到“`切点`(连接点(应用执行过程中能够插入一个切面的点)的集合)”来实现重复利用，大大降低代码的冗余。  
  
>>`AOP`的底层实现原理是动态代理(利用`JDK`或`CGLIB`生成新的字节码文件，然后通过`ClassLoader`将字节码文件加载进虚拟机，从而可以利用`反射机制`(可见反射机制真的是一个十分重要的应用，诸多框架的底层原理的实现都是依赖于反射机制)得到代理的对象类，代理对象的命名一般为`$Proxy0`、`$Proxy1`、`$Proxy2`等等，看到类似这样的对象就说明代理对象获取成功了)。被代理对象的方法，实际上会由动态代理出来的代理对象的`invoke()`方法来执行，此方法中调用原始方法之前、之后都可以加入`AOP`的切面来完成功能的实现。  
  
>>具体到`Spring`中，以事务的实现为例。开发者可以通过在`applicationContext.xml配置文件`中配置指定一个需要扫描的路径作为切点(`Service`包下面所有的类的所有方法)，然后再将次切点与`transactionManager`(事务管理器)相关联，实现事务功能(`Spring`事务的底层原理其实就是对`JDBC`进行了封装，利用`conmmit()`方法和`rollback()`方法实现提交或者回滚，至于事务是什么，MySQL事务的四大特性，分别的实现原理，我就不写了，总要给面试官提问的机会啊)。  
开发者也可以自定义切面，使用`@Aspect`将一个类定义为切面，使用`@Pointcut`注解定义切点，使用`@Before`、`@After`、`@AfterReturning`、`@AfterThrowing`注解定义方法的调用时机。  
  
Spring的讲解先到这里把，后面还有SpringMVC，也许还会有SpringBoot，SpringCloud。。。。Spring全家桶我服
